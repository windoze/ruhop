# Ruhop VPN Configuration

# Shared settings used by both server and client
[common]
# Pre-shared key for encryption (required)
key = "your-secret-key-here"

# MTU for the tunnel interface (default: 1400)
mtu = 1400

# Log level: "error", "warn", "info", "debug", "trace"
log_level = "info"

# Enable packet obfuscation (default: false)
obfuscation = false

# Heartbeat interval in seconds (default: 30)
heartbeat_interval = 30

# Server configuration (used when running as server)
[server]
# IP address to listen on (binds to all ports in port_range)
listen = "0.0.0.0"

# Port range for port hopping [start, end]
# Server listens on ALL ports in this range simultaneously
port_range = [4096, 4196]

# Tunnel network in CIDR notation (for IP allocation)
tunnel_network = "10.0.0.0/24"

# Server's tunnel IP address (optional, defaults to first IP in tunnel_network)
# tunnel_ip = "10.0.0.1"

# DNS configuration - controls what DNS servers are pushed to clients:
# - Omit or empty: No DNS pushed to client, no DNS proxy
# - List of IPs: Push these IPs to client (e.g., dns = ["8.8.8.8"])
# - "tunnel": Enable DNS proxy on tunnel IP, push tunnel IP to client
dns = ["8.8.8.8", "8.8.4.4"]

# Upstream DNS servers for the DNS proxy (only used when dns = "tunnel")
# Supports: "IP[:port][/udp|tcp]", "https://...", "tls://..."
# dns_servers = ["8.8.8.8", "https://cloudflare-dns.com/dns-query"]

# Maximum number of clients (default: 100)
max_clients = 100

# Enable NAT/masquerading for client traffic
enable_nat = true

# Outbound interface for NAT (auto-detected if not set)
# nat_interface = "eth0"

# Client configuration (used when running as client)
[client]
# Server host(s) - hostname or IP, no port (required)
# Can be a single host:
server = "vpn.example.com"
# Or multiple hosts for multi-homed servers:
# server = ["vpn1.example.com", "vpn2.example.com", "1.2.3.4"]

# Port range for port hopping (should match server)
# All ports in this range will be used for sending packets
port_range = [4096, 4196]

# Specific tunnel IP to request (optional, assigned by server if not set)
# tunnel_ip = "10.0.0.2"

# Route all traffic through the VPN (default: true)
route_all_traffic = true

# Routes to exclude from the VPN (bypassed)
# excluded_routes = ["192.168.1.0/24"]

# DNS servers to use when connected
# dns = ["8.8.8.8"]

# Reconnect automatically on connection loss
auto_reconnect = true

# Maximum reconnect attempts (0 = unlimited)
max_reconnect_attempts = 0

# Reconnect delay in seconds
reconnect_delay = 5

# Script to run when VPN connects (optional)
# Arguments: <local_ip> <peer_ip> <netmask> <tun_device>
# on_connect = "/path/to/connect-script.sh"

# Script to run when VPN disconnects (optional)
# Arguments: <local_ip> <peer_ip> <netmask> <tun_device>
# on_disconnect = "/path/to/disconnect-script.sh"
